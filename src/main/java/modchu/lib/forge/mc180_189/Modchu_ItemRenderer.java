package modchu.lib.forge.mc180_189;import java.util.HashMap;import modchu.lib.Modchu_Debug;import modchu.lib.Modchu_GlStateManager;import modchu.lib.Modchu_IItemRenderer;import modchu.lib.Modchu_IItemRendererMaster;import modchu.lib.Modchu_Main;import modchu.lib.Modchu_Reflect;import net.minecraft.client.Minecraft;import net.minecraft.client.entity.AbstractClientPlayer;import net.minecraft.client.entity.EntityPlayerSP;import net.minecraft.client.renderer.GlStateManager;import net.minecraft.client.renderer.ItemRenderer;import net.minecraft.client.renderer.OpenGlHelper;import net.minecraft.client.renderer.RenderHelper;import net.minecraft.client.renderer.entity.Render;import net.minecraft.client.renderer.entity.RenderPlayer;import net.minecraft.item.EnumAction;import net.minecraft.item.ItemStack;import net.minecraft.util.BlockPos;import net.minecraft.util.MathHelper;import net.minecraft.util.ResourceLocation;import net.minecraftforge.fml.relauncher.Side;import net.minecraftforge.fml.relauncher.SideOnly;import org.lwjgl.opengl.GL11;public abstract class Modchu_ItemRenderer extends ItemRenderer implements Modchu_IItemRenderer {	public Modchu_IItemRendererMaster master;	public ItemStack itemToRender;	public float equippedProgress;	public float prevEquippedProgress;	public static ResourceLocation RES_MAP_BACKGROUND;	public Modchu_ItemRenderer(HashMap<String, Object> map) {		super(Minecraft.getMinecraft());		Modchu_Debug.lDebug("Modchu_ItemRenderer init");		map.put("base", this);		Object instance = Modchu_Main.newModchuCharacteristicInstance(map);		Modchu_Debug.lDebug("Modchu_ItemRenderer init instance="+instance);		master = instance instanceof Modchu_IItemRendererMaster ? (Modchu_IItemRendererMaster) instance : null;	}	@Override	public void renderItemInFirstPerson(float f) {		if (RES_MAP_BACKGROUND != null); else RES_MAP_BACKGROUND = (ResourceLocation) Modchu_Reflect.getPrivateValue(ItemRenderer.class, this, 1);		ItemStack itemStack = Minecraft.getMinecraft().thePlayer.inventory.getCurrentItem();		//Modchu_Debug.mDebug("Modchu_ItemRenderer renderItemInFirstPerson itemStack="+itemStack);		if (itemStack != null) {			if (!Modchu_Reflect.loadClass("ItemMap").isInstance(itemStack.getItem())) {				if (master.getFlipHorizontal()) {					//GL11.glPushMatrix();					GL11.glScalef(-1.0F, 1.0F, 1.0F);					//GL11.glPopMatrix();				}			}		} else {			itemToRender = null;			renderItemInFirstPersonNomal(f);			return;		}		itemToRender = null;		equippedProgress = 0.0F;		prevEquippedProgress = 0.0F;		boolean flag = Modchu_Main.getMinecraftVersion() > 179;		int i = flag ? 3 : 4;		try {			// ローカル変数を確保			itemToRender = (ItemStack)Modchu_Reflect.getPrivateValue(ItemRenderer.class, this, i);			i++;			equippedProgress = (Float)Modchu_Reflect.getPrivateValue(ItemRenderer.class, this, i);			i++;			prevEquippedProgress = (Float)Modchu_Reflect.getPrivateValue(ItemRenderer.class, this, i);		} catch (Exception e) {			e.printStackTrace();		}		super.renderItemInFirstPerson(f);	}	protected abstract void renderItemInFirstPersonNomal(float f);	public void drawFirstPersonHand(Render r, int h) {		master.drawFirstPersonHand(r, h);	}	public ItemStack getItemToRender() {		return itemToRender;	}	public float getEquippedProgress() {		return equippedProgress;	}	public float getPrevEquippedProgress() {		return prevEquippedProgress;	}	protected void func_178105_d(float p_178105_1_) {		float f1 = -0.4F * MathHelper.sin(MathHelper.sqrt_float(p_178105_1_) * (float)Math.PI);		float f2 = 0.2F * MathHelper.sin(MathHelper.sqrt_float(p_178105_1_) * (float)Math.PI * 2.0F);		float f3 = -0.2F * MathHelper.sin(p_178105_1_ * (float)Math.PI);		GlStateManager.translate(f1, f2, f3);	}	protected void func_178101_a(float p_178101_1_, float p_178101_2_) {		GlStateManager.pushMatrix();		GlStateManager.rotate(p_178101_1_, 1.0F, 0.0F, 0.0F);		GlStateManager.rotate(p_178101_2_, 0.0F, 1.0F, 0.0F);		RenderHelper.enableStandardItemLighting();		GlStateManager.popMatrix();	}	protected void func_178109_a(AbstractClientPlayer p_178109_1_) {		int i = Minecraft.getMinecraft().theWorld.getCombinedLight(new BlockPos(p_178109_1_.posX, p_178109_1_.posY + p_178109_1_.getEyeHeight(), p_178109_1_.posZ), 0);		float f = i & 65535;		float f1 = i >> 16;		OpenGlHelper.setLightmapTextureCoords(OpenGlHelper.lightmapTexUnit, f, f1);	}	protected void func_178110_a(EntityPlayerSP p_178110_1_, float p_178110_2_) {		float f1 = p_178110_1_.prevRenderArmPitch + (p_178110_1_.renderArmPitch - p_178110_1_.prevRenderArmPitch) * p_178110_2_;		float f2 = p_178110_1_.prevRenderArmYaw + (p_178110_1_.renderArmYaw - p_178110_1_.prevRenderArmYaw) * p_178110_2_;		GlStateManager.rotate((p_178110_1_.rotationPitch - f1) * 0.1F, 1.0F, 0.0F, 0.0F);		GlStateManager.rotate((p_178110_1_.rotationYaw - f2) * 0.1F, 0.0F, 1.0F, 0.0F);	}	protected void renderPlayerArms(AbstractClientPlayer p_178102_1_) {		Minecraft.getMinecraft().getTextureManager().bindTexture(p_178102_1_.getLocationSkin());		Render render = Minecraft.getMinecraft().getRenderManager().getEntityRenderObject(Minecraft.getMinecraft().thePlayer);		RenderPlayer renderplayer = (RenderPlayer) render;		if (!p_178102_1_.isInvisible()) {			Modchu_GlStateManager.disableCull();			renderRightArm(renderplayer);			func_178106_b(renderplayer);			Modchu_GlStateManager.enableCull();		}	}	protected abstract void renderRightArm(RenderPlayer renderplayer);	protected abstract void func_178106_b(RenderPlayer renderplayer);	protected float func_178100_c(float p_178100_1_) {		float f1 = 1.0F - p_178100_1_ / 45.0F + 0.1F;		f1 = MathHelper.clamp_float(f1, 0.0F, 1.0F);		f1 = -MathHelper.cos(f1 * (float)Math.PI) * 0.5F + 0.5F;		return f1;	}	protected void func_178104_a(AbstractClientPlayer p_178104_1_, float p_178104_2_) {		float f1 = p_178104_1_.getItemInUseCount() - p_178104_2_ + 1.0F;		float f2 = f1 / itemToRender.getMaxItemUseDuration();		float f3 = MathHelper.abs(MathHelper.cos(f1 / 4.0F * (float) Math.PI) * 0.1F);		if (f2 >= 0.8F) {			f3 = 0.0F;		}		GlStateManager.translate(0.0F, f3, 0.0F);		float f4 = 1.0F - (float) Math.pow(f2, 27.0D);		GlStateManager.translate(f4 * 0.6F, f4 * -0.5F, f4 * 0.0F);		GlStateManager.rotate(f4 * 90.0F, 0.0F, 1.0F, 0.0F);		GlStateManager.rotate(f4 * 10.0F, 1.0F, 0.0F, 0.0F);		GlStateManager.rotate(f4 * 30.0F, 0.0F, 0.0F, 1.0F);	}	protected void transformFirstPersonItem(float p_178096_1_, float p_178096_2_) {		GlStateManager.translate(0.56F, -0.52F, -0.71999997F);		GlStateManager.translate(0.0F, p_178096_1_ * -0.6F, 0.0F);		GlStateManager.rotate(45.0F, 0.0F, 1.0F, 0.0F);		float f2 = MathHelper.sin(p_178096_2_ * p_178096_2_ * (float) Math.PI);		float f3 = MathHelper.sin(MathHelper.sqrt_float(p_178096_2_) * (float) Math.PI);		GlStateManager.rotate(f2 * -20.0F, 0.0F, 1.0F, 0.0F);		GlStateManager.rotate(f3 * -20.0F, 0.0F, 0.0F, 1.0F);		GlStateManager.rotate(f3 * -80.0F, 1.0F, 0.0F, 0.0F);		GlStateManager.scale(0.4F, 0.4F, 0.4F);	}	protected void func_178098_a(float p_178098_1_, AbstractClientPlayer p_178098_2_) {		GlStateManager.rotate(-18.0F, 0.0F, 0.0F, 1.0F);		GlStateManager.rotate(-12.0F, 0.0F, 1.0F, 0.0F);		GlStateManager.rotate(-8.0F, 1.0F, 0.0F, 0.0F);		GlStateManager.translate(-0.9F, 0.2F, 0.0F);		float f1 = itemToRender.getMaxItemUseDuration() - (p_178098_2_.getItemInUseCount() - p_178098_1_ + 1.0F);		float f2 = f1 / 20.0F;		f2 = (f2 * f2 + f2 * 2.0F) / 3.0F;		if (f2 > 1.0F) {			f2 = 1.0F;		}		if (f2 > 0.1F) {			float f3 = MathHelper.sin((f1 - 0.1F) * 1.3F);			float f4 = f2 - 0.1F;			float f5 = f3 * f4;			GlStateManager.translate(f5 * 0.0F, f5 * 0.01F, f5 * 0.0F);		}		GlStateManager.translate(f2 * 0.0F, f2 * 0.0F, f2 * 0.1F);		GlStateManager.scale(1.0F, 1.0F, 1.0F + f2 * 0.2F);	}	protected void func_178103_d() {		GlStateManager.translate(-0.5F, 0.2F, 0.0F);		GlStateManager.rotate(30.0F, 0.0F, 1.0F, 0.0F);		GlStateManager.rotate(-80.0F, 1.0F, 0.0F, 0.0F);		GlStateManager.rotate(60.0F, 0.0F, 1.0F, 0.0F);	}	@SideOnly(Side.CLIENT)	protected static final class SwitchEnumAction {		public static final int[] field_178094_a = new int[EnumAction.values().length];		private static final String __OBFID = "CL_00002537";		static {			try {				field_178094_a[EnumAction.NONE.ordinal()] = 1;			} catch (NoSuchFieldError var5) {				;			}			try {				field_178094_a[EnumAction.EAT.ordinal()] = 2;			} catch (NoSuchFieldError var4) {				;			}			try {				field_178094_a[EnumAction.DRINK.ordinal()] = 3;			} catch (NoSuchFieldError var3) {				;			}			try {				field_178094_a[EnumAction.BLOCK.ordinal()] = 4;			} catch (NoSuchFieldError var2) {				;			}			try {				field_178094_a[EnumAction.BOW.ordinal()] = 5;			} catch (NoSuchFieldError var1) {				;			}		}	}	@Override	public void superRenderItem(Object entityLivingBase, Object itemStack, int par3) {	}	@Override	public void superRenderItem(Object entityLivingBase, Object itemStack, int par3, Object itemRenderType) {	}	@Override	public void superRenderOverlays(float par1) {	}	@Override	public void superUpdateEquippedItem() {	}	@Override	public void superResetEquippedProgress() {	}	@Override	public void superResetEquippedProgress2() {	}	@Override	public void superRenderItemInFirstPerson(float f) {	}}